events {
    worker_connections 1024;
}

http {
#    include /etc/nginx/mime.types;
#    default_type application/octet-stream;

    server {
        listen 127.0.0.1:8080;
        server_name localhost;
        
        # Absolute path to your YoupiBanane folder
        root /mnt/c/Users/dajcs/code/webserv/YoupiBanane;

        # Root location answering /
        location / {
            limit_except GET { deny all; }
            index youpi.bad_extension;
        }

        # /directory/ 
        location /directory/ {
            limit_except GET { deny all; }
            alias /mnt/c/Users/dajcs/code/webserv/YoupiBanane/;
            index youpi.bad_extension;
        }

        # /post_body
        location /post_body {
            limit_except POST { deny all; }
            client_max_body_size 100;
            index youpi.bad_extension;
        }

        # PUT /put_test/
        location /put_test/ {
            limit_except PUT { deny all; }
            # Nginx requires extra modules for full PUT support on static files, 
            # but this will at least allow us to see the headers.
            client_body_temp_path /tmp;
        }

        # .bla CGI
        location ~ \.bla$ {
            limit_except POST { deny all; }
            # Note: Nginx cannot run your ubuntu_cgi_tester directly without fcgiwrap
            # But we can at least see how it handles the request path.
        }
    }
}

